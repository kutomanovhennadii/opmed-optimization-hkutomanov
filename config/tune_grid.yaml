# configs/tune_grid.yaml

# 1. (Из Эпика) На каких датасетах запускать
datasets:
  #- data/input/synthetic_1d_1r.csv
  - data/input/synthetic_2d_2r.csv
  #- data/input/synthetic_3d_8r.csv

# 2. (Из Эпика) Цель для 7.3.3 (select_best_config.py)
#    (Как вы и предложили, меняем на 'utilization'
#     и 'runtime_sec' будет вторичной метрикой)
objective_primary: "utilization"
objective_primary_goal: "maximize"
objective_secondary: "runtime_sec"
objective_secondary_goal: "minimize"

repeats: 1

# 3. (Из Эпика) Управление тюнером
tuning:
  strategy: "grid" # Полный перебор

# 4. ФИКСИРОВАННЫЙ КОНТЕКСТ
#    Эти параметры НЕ перебираются, но ПЕРЕКРЫВАЮТ
#    config.yaml для ВСЕХ запусков.
context:
  # --- Фиксируем лимиты и константы ---
  solver.max_time_in_seconds: 60    # Даем каждому запуску 1 минуту
  solver.random_seed: 42            # Для воспроизводимости
  solver.num_workers: 8

  # --- Зафиксировали buffer (как вы указали) ---
  buffer: 0.25                      #

# 5. СЕТКА ПЕРЕБОРА (GRID)
#    Ключи должны полностью совпадать с config.yaml

# 5.1 Модельные параметры (из корня config.yaml)
model:
  grid:
    # (default=1, int)
    activation_penalty: [0, 1, 5, 10]

# 5.2 Параметры решателя (из solver: в config.yaml)
solver:
  grid:
    # Стратегия поиска
    search_branching: ["AUTOMATIC", "PORTFOLIO", "FIXED_SEARCH"]

    # Искать оптимум или остановиться на первом?
    stop_after_first_solution: [false, true]

    # Предобработка модели
    cp_model_presolve: [true, false]

    # Уровень линеаризации
    linearization_level: [0, 1]
