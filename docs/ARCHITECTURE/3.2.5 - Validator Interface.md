\## 3.2.5 - Validator Interface



\### Purpose

The Validator module performs post-solution verification to ensure that the assignments produced by the Optimizer meet all logical and temporal constraints defined in the theoretical model.

It is the final checkpoint for model correctness before visualization or metric reporting.



---



\### Function Signature

validate\_assignments(assignments, surgeries, cfg) -> ValidationReport







---



\### Contracts



\*\*Preconditions\*\*

\- `assignments` correspond to surgeries returned by the Optimizer (unique surgery\_id values).

\- `surgeries` are validated objects loaded by DataLoader.

\- `cfg` contains all constraint parameters (BUFFER, SHIFT\_MIN, SHIFT\_MAX, UTILIZATION\_TARGET, etc.).



\*\*Postconditions\*\*

\- Returns a `ValidationReport` object, regardless of outcome.

\- All constraint checks are evaluated, and results are stored in the report.

\- Violations and warnings are recorded but do not interrupt validation execution.



\*\*Errors\*\*

\- `ValidationError`: raised only for malformed inputs (missing keys, invalid types).

\- Other inconsistencies are logged as report entries, not raised exceptions.



---



\### Validation Checks



| ID | Check | Description | Condition |

|----|--------|-------------|------------|

| V1 | NoOverlap | No two surgeries overlap for the same anesthetist. | start2 >= end1 |

| V2 | RoomOverlap | No two surgeries overlap in the same room. | start2 >= end1 |

| V3 | Buffer | If anesthetist switches rooms, enforce idle time ≥ BUFFER. | gap >= cfg.buffer |

| V4 | ShiftMin/Max | Each anesthetist shift duration within limits. | SHIFT\_MIN ≤ duration ≤ SHIFT\_MAX |

| V5 | Utilization | Overall utilization ≥ cfg.utilization\_target. | U = Σ(duration\_surgeries)/Σ(cost\_anesthetists) |

| V6 | DurationLimit | Surgeries longer than limit (12h) are invalid if enforced. | duration ≤ 12h |

| V7 | DataIntegrity | All IDs unique, time fields valid and monotonic. | True |



Each check records a boolean result and optional violation details.



---



\### ValidationReport Structure



| Key | Type | Description |

|------|------|-------------|

| timestamp | str (ISO-8601) | Validation execution time |

| valid | bool | True if all mandatory checks passed |

| errors | list\[dict] | Fatal constraint violations (with type and message) |

| warnings | list\[dict] | Non-critical issues (e.g., low utilization) |

| metrics | dict | Computed values (cost, utilization, num\_anesthetists, num\_violations) |

| checks | dict\[str,bool] | Results of individual checks (V1–V7) |



---



\### Example validation\_report.json

{

"timestamp": "2025-10-30T14:35:00",

"valid": true,

"errors": \[],

"warnings": \[],

"metrics": {

"total\_cost": 185.0,

"utilization": 0.83,

"num\_anesthetists": 14,

"num\_violations": 0

},

"checks": {

"NoOverlap": true,

"RoomOverlap": true,

"Buffer": true,

"ShiftLimits": true,

"Utilization": true,

"DurationLimits": true,

"DataIntegrity": true

}

}





---



\### Integration

\- The Validator runs immediately after the Optimizer completes.

\- The report is stored in the same output directory (`validation\_report.json`).

\- CI/CD pipelines use the `valid` flag as a success criterion.

\- The Visualizer may highlight detected violations using the report contents.



---



\### Summary

The Validator ensures that all generated schedules are feasible and compliant with operational and temporal constraints.

It outputs a standardized `validation\_report.json` summarizing validation status, detected violations, and computed metrics.

This report guarantees reproducibility and serves as the authoritative record of solution correctness.
