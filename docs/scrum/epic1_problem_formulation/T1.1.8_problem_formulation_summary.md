\# üß© Problem Formulation ‚Äî Opmed Anesthesiologist Allocation Optimization



\## 1. Overview

The goal of this project is to design an optimization model that assigns anesthesiologists and operating rooms to surgeries in the most cost-efficient way while satisfying all operational, temporal, and logistical constraints.  

Each surgery must be covered by exactly one anesthesiologist and one room.  

The objective is to minimize total anesthesiologist cost while maintaining at least 80% utilization efficiency.



---



\## 2. Entities and Parameters



\### Surgeries (S)

\- Each surgery has a fixed start and end time; surgeries cannot be rescheduled.  

\- Set: `S = {1, 2, ‚Ä¶, N}`  

\- Parameters:  

&nbsp; `start\_s`, `end\_s`, `duration\_s = end\_s - start\_s`.



\### Anesthesiologists (A)

\- Unlimited pool; each shift corresponds to one unique anesthesiologist.  

\- Set: `A = {1, 2, ‚Ä¶, M}` (M determined by solver).  

\- Parameters:  

&nbsp; `t\_min(a)`, `t\_max(a)`, `duration\_a = t\_max(a) - t\_min(a)`, `cost(a)`.



\### Rooms (R)

\- Fixed number of operating rooms: `R = {1, 2, ‚Ä¶, 20}`.  

\- Only one surgery per room at any time.



\### Time

\- Continuous representation in hours.  

\- Discretization via parameter `TIME\_UNIT` (default 0.0833 = 5 minutes).  

\- Adjustable for solver performance tuning.



\### Constants

ROOMS\_MAX = 20  

SHIFT\_MIN = 5 hours  

SHIFT\_MAX = 12 hours  

SHIFT\_OVERTIME = 9 hours  

OVERTIME\_MULTIPLIER = 1.5  

BUFFER = 0.25 hours (15 minutes)  

UTILIZATION\_TARGET = 0.8 (80%)  

ENFORCE\_SURGERY\_DURATION\_LIMIT = true (toggle for real-world extensibility)



---



\## 3. Constraints



\### Room Allocation

\- Each surgery must occur in one room:  

&nbsp; Œ£(y\_{s,r}) = 1 for all s ‚àà S.  

\- No two surgeries may overlap in the same room:  

&nbsp; y\_{s1,r} + y\_{s2,r} ‚â§ 1 if intervals overlap.



\### Anesthesiologist Assignment

\- Each surgery must be covered by one anesthesiologist:  

&nbsp; Œ£(x\_{s,a}) = 1 for all s ‚àà S.  

\- No anesthesiologist may perform overlapping surgeries:  

&nbsp; x\_{s1,a} + x\_{s2,a} ‚â§ 1 if intervals overlap.



\### Buffer Between Rooms

If anesthesiologist a switches rooms,  

`start‚ÇÇ ‚â• end‚ÇÅ + BUFFER`.  

If surgeries are in the same room, no buffer is required.



\### Shift Duration

`SHIFT\_MIN ‚â§ duration\_a ‚â§ SHIFT\_MAX`.  

If `ENFORCE\_SURGERY\_DURATION\_LIMIT = true`, surgeries longer than 12h are rejected.



---



\## 4. Objective Function

Minimize total anesthesiologist cost:



C\_total = Œ£(cost(a)), for all a ‚àà A  

where  

cost(a) = max(SHIFT\_MIN, duration\_a) + (OVERTIME\_MULTIPLIER ‚àí 1) √ó max(0, duration\_a ‚àí SHIFT\_OVERTIME).



\### Auxiliary Efficiency Metric

Utilization = Œ£(duration\_surgeries) / Œ£(cost\_anesthesiologists).  

Target: Utilization ‚â• 0.8 (80%).



Optionally, a two-level objective can be defined:  

`Minimize Œ± √ó Œ£(active\[a]) + Œ≤ √ó Œ£(cost\[a])`,  

where Œ± prioritizes fewer anesthesiologists and Œ≤ minimizes cost.



---



\## 5. Problem Type and Solver Choice

The task is a combinatorial allocation problem with temporal and resource constraints ‚Äî close to job-shop scheduling and assignment optimization.  

Because of mixed linear and interval logic, the model is implemented using \*\*CP-SAT (Constraint Programming with SAT hybrid)\*\* from \*\*Google OR-Tools\*\*.  

CP-SAT efficiently handles Boolean logic, temporal intervals, and linear costs without requiring manual time discretization.



---



\## 6. Logical Interaction Scheme

Data flow of the system:



1\. \*\*DataLoader\*\* ‚Äî reads and validates input (`surgeries.csv`, `config.yaml`).  

2\. \*\*ModelBuilder (SolverCore)\*\* ‚Äî constructs the CP-SAT model and constraints.  

3\. \*\*Optimizer\*\* ‚Äî solves the model with given hyperparameters.  

4\. \*\*Validator\*\* ‚Äî checks schedule correctness (non-overlaps, buffers, shifts).  

5\. \*\*Visualizer\*\* ‚Äî plots and exports schedule results.  

6\. \*\*Metrics \& Logger\*\* ‚Äî records solver metrics and runtime.  

7\. \*\*Hyperparameter Tuner\*\* ‚Äî orchestrates parameter search via Airflow + MLflow.



Main data path (simplified):

surgeries.csv ‚Üí DataLoader ‚Üí ModelBuilder ‚Üí Optimizer ‚Üí Validator ‚Üí Visualizer ‚Üí solution.csv / metrics.json / solver.log



---



\## 7. Input and Output Data Format



\### Input: surgeries.csv

| Field | Type | Description |

|--------|------|-------------|

| surgery\_id | string / int | Unique identifier |

| start\_time | datetime | Surgery start |

| end\_time | datetime | Surgery end |

| duration | float | Duration (hours) |

| room\_hint | string (optional) | Preferred room |



\### Input: config.yaml

ROOMS\_MAX, SHIFT\_MIN, SHIFT\_MAX, SHIFT\_OVERTIME, BUFFER, TIME\_UNIT, UTILIZATION\_TARGET,  

ENFORCE\_SURGERY\_DURATION\_LIMIT, and solver parameters (branching, seed, workers, time limit).



\### Output: solution.csv

| Column | Type | Description |

|---------|------|-------------|

| surgery\_id | string | Surgery identifier |

| start\_time | datetime | Surgery start |

| end\_time | datetime | Surgery end |

| anesthetist\_id | string | Assigned anesthesiologist |

| room\_id | string | Assigned room |



---



\## 8. Validity Criteria

A solution is valid if:

\- Every surgery is assigned to one anesthesiologist and one room.  

\- No time overlaps for anesthesiologists or rooms.  

\- Buffers between rooms are respected.  

\- Shift durations meet \[SHIFT\_MIN, SHIFT\_MAX].  

\- If `ENFORCE\_SURGERY\_DURATION\_LIMIT = true`, no operation exceeds 12 hours.  

\- All time values are valid (`start < end`, positive durations).  

\- Utilization ‚â• UTILIZATION\_TARGET (0.8).  

\- Solver run is reproducible (logged seed, parameters, OR-Tools version).



Validation output (`validation\_report.json`):



{

&nbsp; "timestamp": "2025-10-29T10:45:00",

&nbsp; "valid": true,

&nbsp; "errors": \[],

&nbsp; "warnings": \[],

&nbsp; "metrics": {

&nbsp;   "total\_cost": 185.0,

&nbsp;   "utilization": 0.83,

&nbsp;   "num\_anesthetists": 14

&nbsp; }

}



---



\## 9. Remarks and Extensibility

\- The model currently assumes single-day scheduling; multi-day and handover features can be added later.  

\- `ENFORCE\_SURGERY\_DURATION\_LIMIT` ensures compatibility with the assignment but allows easy future extension.  

\- The architecture supports integration with MLOps tools (MLflow, Airflow, Neptune.ai) for automated experimentation and parameter optimization.  

\- All documents from T1.1.1 to T1.1.7 constitute the formal foundation for this problem definition.



---

