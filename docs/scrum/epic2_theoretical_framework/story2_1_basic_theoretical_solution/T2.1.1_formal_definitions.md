\# ğŸ§© T2.1.1 â€” Formal Definition of Sets, Mappings, and Variables



\## 1. Purpose

To formally define all mathematical sets, mappings, and decision variables used in the optimization model.

The goal is to ensure consistency, theoretical rigor, and direct compatibility with the CP-SAT formulation.



---



\## 2. Sets



\### Surgeries (S)

Each surgery `s âˆˆ S` is a fixed event with known time boundaries.

\- Parameters:

&nbsp; - `start\_s` â€” surgery start time

&nbsp; - `end\_s` â€” surgery end time

&nbsp; - `duration\_s = end\_s âˆ’ start\_s` â€” surgery duration

Surgeries are fixed in time and cannot be shifted.



\### Anesthesiologists (A)

Each element `a âˆˆ A` represents a \*\*single working shift\*\* of an anesthesiologist.

Even if the same person works multiple days, each shift is treated as a unique entity.

The solver dynamically determines the minimum number of anesthesiologists required to cover all surgeries.



\### Rooms (R)

`R = {1, 2, â€¦, ROOMS\_MAX}` â€” finite set of available operating rooms.

At any given moment, a room can host no more than one surgery.



\### Time (T)

Represents a continuous or discretized time axis with step size `TIME\_UNIT` (default = 5 minutes).

Used for reasoning and validation, but not always explicitly in CP-SAT.



---



\## 3. Mapping Functions



\- `room(s) â†’ R` â€” assigns surgery `s` to a room.

\- `anesth(s) â†’ A` â€” assigns surgery `s` to an anesthesiologist.

\- `time(s) â†’ (start\_s, end\_s)` â€” returns the time interval of surgery `s`.

\- `shift(a) â†’ \[t\_min(a), t\_max(a)]` â€” defines the time span of anesthesiologist `a`â€™s shift.

\- `duration(a) â†’ t\_max(a) âˆ’ t\_min(a)` â€” computes shift duration.

\- `cost(a) â†’ â„âº` â€” computes total cost of the shift (including overtime).



---



\## 4. Model Variables



\- \*\*x\[s, a] âˆˆ {0, 1}\*\*

&nbsp; Binary assignment variable:

&nbsp; `x\[s, a] = 1` if surgery `s` is performed by anesthesiologist `a`, otherwise 0.



\- \*\*y\[s, r] âˆˆ {0, 1}\*\*

&nbsp; Binary assignment variable:

&nbsp; `y\[s, r] = 1` if surgery `s` is assigned to room `r`, otherwise 0.



\- \*\*t\_min\[a], t\_max\[a] âˆˆ â„\*\*

&nbsp; Real-valued variables defining the start and end of anesthesiologist `a`â€™s shift.

&nbsp; Derived from assigned surgeries:

&nbsp; - `t\_min\[a] = min(start\_s : x\[s, a] = 1)`

&nbsp; - `t\_max\[a] = max(end\_s : x\[s, a] = 1)`



\- \*\*duration\[a] âˆˆ â„âº\*\*

&nbsp; Shift duration:

&nbsp; `duration\[a] = t\_max\[a] âˆ’ t\_min\[a]`



\- \*\*cost\[a] âˆˆ â„âº\*\*

&nbsp; Shift cost:

&nbsp; `cost\[a] = max(SHIFT\_MIN, duration\[a]) + (OVERTIME\_MULTIPLIER âˆ’ 1) Ã— max(0, duration\[a] âˆ’ SHIFT\_OVERTIME)`



\- \*\*active\[a] âˆˆ {0,1}\*\*

&nbsp; Binary indicator: 1 if anesthesiologist `a` is assigned to at least one surgery, 0 otherwise.

&nbsp; Used in multi-objective formulations to minimize both number of active anesthesiologists and cost.



---



\## 5. Derived Relations and Predicates



\- \*\*Overlap(sâ‚, sâ‚‚)\*\*

&nbsp; True if surgeries overlap in time:

&nbsp; `Overlap(sâ‚, sâ‚‚) = True â‡” \[startâ‚, endâ‚] âˆ© \[startâ‚‚, endâ‚‚] â‰  âˆ…`



\- \*\*BufferConstraint(a, sâ‚, sâ‚‚)\*\*

&nbsp; If anesthesiologist `a` performs surgeries `sâ‚` and `sâ‚‚` in different rooms:

&nbsp; `startâ‚‚ â‰¥ endâ‚ + BUFFER`

&nbsp; (no constraint if both surgeries are in the same room).



\- \*\*ShiftFeasible(a)\*\*

&nbsp; True if:

&nbsp; `SHIFT\_MIN â‰¤ duration\[a] â‰¤ SHIFT\_MAX`



---



\## 6. Extensibility Notes

The current structure of sets and variables allows for straightforward future extensions:

\- `S\_day âŠ† S` â€” partition surgeries by day for multi-day planning.

\- Separate human and shift levels: `A\_human` vs `A\_shift`.

\- Incorporate stochastic start times or variable surgery durations.

\- Introduce additional mappings for handovers or cross-shift coverage.



---
