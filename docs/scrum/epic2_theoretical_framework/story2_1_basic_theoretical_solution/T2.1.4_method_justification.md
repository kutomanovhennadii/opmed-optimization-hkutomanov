\# ðŸ§© T2.1.4 â€” Theoretical Justification of the Chosen Method (CP-SAT)



\## 1. Purpose

To provide a theoretical rationale for selecting \*\*CP-SAT (Constraint Programming â€“ SAT hybrid)\*\* as the core solving algorithm for the anesthesiologist scheduling problem.

The goal is to justify the choice based on the problemâ€™s structure, constraint types, and performance expectations compared with alternative optimization paradigms.



---



\## 2. Background

The problem formulated in Epic 1 and Story 2.1 combines:

\- discrete binary assignments (`x\[s, a]`, `y\[s, r]`),

\- temporal intervals with non-overlap rules,

\- piecewise-linear cost functions,

\- and logical constraints (buffers, activation conditions).



This hybrid structure makes classical \*\*Linear Programming (LP)\*\* or \*\*pure Integer Linear Programming (MILP)\*\* formulations insufficiently expressive without excessive linearization.



---



\## 3. Overview of CP-SAT

CP-SAT (Constraint Programming with SAT-based search) is a \*\*hybrid optimization solver\*\* that integrates:

1\. \*\*Constraint Programming (CP)\*\* â€” for modeling logical and temporal constraints declaratively.

2\. \*\*SAT Solving (Boolean Satisfiability)\*\* â€” for efficient propagation of combinatorial conditions.

3\. \*\*Integer Programming (IP)\*\* â€” for linear objectives and arithmetic relations.



It was developed by Google as part of the \*\*OR-Tools\*\* suite and is currently one of the most capable open-source solvers for large-scale combinatorial optimization.



---



\## 4. Suitability of CP-SAT for the Current Problem



\### 4.1. Expressiveness

CP-SAT supports the exact features required for this problem:

\- \*\*IntervalVar()\*\* â€” models surgeries as time intervals with fixed start and duration.

\- \*\*NoOverlap(intervals)\*\* â€” enforces non-overlapping surgeries per room or anesthesiologist.

\- \*\*AddLinearConstraint()\*\* â€” expresses linear boundaries (shift min/max, cost).

\- \*\*OnlyEnforceIf()\*\* â€” conditional constraints linking assignments and buffer logic.

\- \*\*AddMaxEquality()\*\* â€” implements piecewise-linear cost functions without approximation.



This allows direct, readable modeling of business rules without time discretization or relaxation.



\### 4.2. Efficiency

CP-SAT uses \*\*hybrid search\*\*:

\- Conflict-driven clause learning (from SAT) for fast pruning.

\- Lazy propagation of interval constraints.

\- Mixed integer relaxations to guide heuristic search.

\- Parallel multi-threaded solving with reproducibility via `random\_seed`.



This provides scalability to hundreds of variables and thousands of constraints with good convergence properties for structured problems.



\### 4.3. Determinism and Reproducibility

Unlike stochastic metaheuristics, CP-SAT can produce \*\*deterministic, reproducible results\*\* for a fixed seed, which is critical for production-grade optimization and MLOps tracking.



---



\## 5. Comparison with Alternatives



| Method | Strengths | Weaknesses | Suitability |

|---------|------------|-------------|--------------|

| \*\*MILP (Gurobi, CPLEX)\*\* | Strong linear solvers, mature ecosystem | Poor handling of non-linear time/interval constraints | Partial |

| \*\*Pure CP (Choco, Minizinc)\*\* | Highly expressive constraints | Weak cost optimization, less efficient scaling | Moderate |

| \*\*Metaheuristics (GA, LNS, Simulated Annealing)\*\* | Fast approximate solutions | Non-deterministic, require tuning, no guarantees | Useful for large N |

| \*\*CP-SAT (OR-Tools)\*\* | Combines logic, intervals, and linear costs efficiently | Complex tuning, exponential runtime in edge cases | Optimal compromise |



Conclusion: \*\*CP-SAT dominates\*\* due to its hybrid nature and built-in support for temporal reasoning and conditional logic, both critical in this domain.



---



\## 6. Theoretical Justification

\- The problem belongs to the \*\*NP-hard combinatorial scheduling\*\* class (see T2.1.3).

\- For such problems, \*\*Constraint Programming with SAT integration\*\* provides the best balance between:

&nbsp; - expressive constraint modeling,

&nbsp; - reasonable exactness,

&nbsp; - and acceptable runtime for small/medium instances.

\- CP-SAT achieves \*\*pseudo-polynomial performance\*\* for structured interval problems due to domain filtering and propagation heuristics.

\- Its design ensures \*\*soundness\*\* (all solutions satisfy constraints) and \*\*completeness\*\* (optimal solution found if search fully explored).



---



\## 7. Integration with MLOps Loop

CP-SAT exposes multiple \*\*hyperparameters\*\* (search\_branching, num\_search\_workers, linearization\_level, etc.), enabling automated tuning pipelines.

This integrates naturally with tools such as \*\*Airflow\*\* (orchestration) and \*\*MLflow\*\* (tracking).

Hence, CP-SAT is not only a solver but a \*\*data-driven optimization platform\*\* suitable for experiment tracking and reproducible research.



---



\## 8. Conclusion

CP-SAT was selected because it:

\- Naturally expresses interval-based scheduling constraints.

\- Handles mixed Boolean, temporal, and linear relations.

\- Supports efficient propagation and hybrid search.

\- Provides deterministic, explainable, and reproducible optimization.

\- Integrates seamlessly into modern MLOps workflows.



It is thus the theoretically and practically optimal solver for the anesthesiologist scheduling problem as defined.
